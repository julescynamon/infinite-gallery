{"version":3,"sources":["Components/InfiniteScroll/InfiniteScroll.js","App.js","index.js"],"names":["InfiniteScroll","useState","dataImg","setDataImg","pageIndex","setPageIndex","searchState","setSearchState","firstCall","setFirstCall","useEffect","fetch","then","response","json","data","imagsRreceived","results","forEach","img","push","urls","regular","newFreshState","index","i","j","inpRef","useRef","window","addEventListener","infiniteCheck","removeEventListener","document","documentElement","scrollTop","scrollHeight","clientHeight","className","onSubmit","e","preventDefault","current","value","htmlFor","type","id","ref","map","src","alt","uuidv4","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"6PAIe,SAASA,IACvB,MAA8BC,mBAAS,CAAC,GAAI,GAAI,KAAhD,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAkCF,mBAAS,GAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAAsCJ,mBAAS,UAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KACA,EAAkCN,oBAAS,GAA3C,mBAAOO,EAAP,KAAkBC,EAAlB,KAyDAC,qBAAU,WACLF,GAzBJG,MAAM,+CAAD,OAC2CP,EAD3C,8BAC0EE,EAD1E,2DAGHM,MAAK,SAACC,GACN,OAAOA,EAASC,UAEhBF,MAAK,SAACG,GACN,IAAMC,EAAiB,GACvBD,EAAKE,QAAQC,SAAQ,SAACC,GACrBH,EAAeI,KAAKD,EAAIE,KAAKC,YAI9B,IAFA,IAAMC,EAAgB,CAAC,GAAI,GAAI,IAC3BC,EAAQ,EACHC,EAAI,EAAGA,EAAI,EAAGA,IACtB,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACvBH,EAAcE,GAAGL,KAAKJ,EAAeQ,IACrCA,IAIFrB,EAAWoB,QASX,CAACjB,IAEJI,qBAAU,WA7DTC,MAAM,+CAAD,OAC2CP,EAD3C,8BAC0EE,EAD1E,2DAGHM,MAAK,SAACC,GACN,OAAOA,EAASC,UAEhBF,MAAK,SAACG,GACN,IAAMC,EAAiB,GACvBD,EAAKE,QAAQC,SAAQ,SAACC,GACrBH,EAAeI,KAAKD,EAAIE,KAAKC,YAQ9B,IANA,IAAMC,EAAgB,CAAC,YAClBrB,EAAQ,IADS,YAEjBA,EAAQ,IAFS,YAGjBA,EAAQ,KAETsB,EAAQ,EACHC,EAAI,EAAGA,EAAI,EAAGA,IACtB,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACvBH,EAAcE,GAAGL,KAAKJ,EAAeQ,IACrCA,IAIFrB,EAAWoB,GACXd,GAAa,QAsCb,CAACL,IAEJ,IAOMuB,EAASC,mBAEflB,qBAAU,WAET,OADAmB,OAAOC,iBAAiB,SAAUC,GAC3B,WACNF,OAAOG,oBAAoB,SAAUD,MAEpC,IAEH,IAAMA,EAAgB,WACrB,MACCE,SAASC,gBADFC,EAAR,EAAQA,UAAR,EAAmBC,aAGAD,GAHnB,EAAiCE,cAIhChC,GAAa,SAACD,GAAD,OAAeA,EAAY,MAI1C,OACC,sBAAKkC,UAAU,YAAf,UACC,uBAAMC,SA3Ba,SAACC,GACrBA,EAAEC,iBAEFlC,EAAeoB,EAAOe,QAAQC,OAC9BtC,EAAa,IAuBZ,UACC,uBAAOuC,QAAQ,SAAf,6BACA,uBAAOC,KAAK,OAAOC,GAAG,SAASC,IAAKpB,OAErC,sBAAKW,UAAU,YAAf,UACC,8BACEpC,EAAQ,GAAG8C,KAAI,SAAC7B,GAChB,OAAO,qBAAoB8B,IAAK9B,EAAK+B,IAAI,YAAxBC,oBAGnB,8BACEjD,EAAQ,GAAG8C,KAAI,SAAC7B,GAChB,OAAO,qBAAoB8B,IAAK9B,EAAK+B,IAAI,YAAxBC,oBAGnB,8BACEjD,EAAQ,GAAG8C,KAAI,SAAC7B,GAChB,OAAO,qBAAoB8B,IAAK9B,EAAK+B,IAAI,YAAxBC,0BC7GRC,MARf,WACC,OACC,8BACC,cAAC,EAAD,OCDHC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtB,SAASuB,eAAe,W","file":"static/js/main.c09ed62c.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./InfiniteScroll.css\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport default function InfiniteScroll() {\n\tconst [dataImg, setDataImg] = useState([[], [], []]);\n\tconst [pageIndex, setPageIndex] = useState(1);\n\tconst [searchState, setSearchState] = useState(\"random\");\n\tconst [firstCall, setFirstCall] = useState(true);\n\n\tconst infinitFetchData = () => {\n\t\tfetch(\n\t\t\t`https://api.unsplash.com/search/photos?page=${pageIndex}&per_page=30&query=${searchState}&client_id=1uDochQiLEIUmXb38RxZfLz-GdvUleYSxAAp5M7vcAE`,\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconst imagsRreceived = [];\n\t\t\t\tdata.results.forEach((img) => {\n\t\t\t\t\timagsRreceived.push(img.urls.regular);\n\t\t\t\t});\n\t\t\t\tconst newFreshState = [\n\t\t\t\t\t[...dataImg[0]],\n\t\t\t\t\t[...dataImg[1]],\n\t\t\t\t\t[...dataImg[2]],\n\t\t\t\t];\n\t\t\t\tlet index = 0;\n\t\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\t\tfor (let j = 0; j < 10; j++) {\n\t\t\t\t\t\tnewFreshState[i].push(imagsRreceived[index]);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetDataImg(newFreshState);\n\t\t\t\tsetFirstCall(false);\n\t\t\t});\n\t};\n\n\tconst searchFetchData = () => {\n\t\tfetch(\n\t\t\t`https://api.unsplash.com/search/photos?page=${pageIndex}&per_page=30&query=${searchState}&client_id=1uDochQiLEIUmXb38RxZfLz-GdvUleYSxAAp5M7vcAE`,\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tconst imagsRreceived = [];\n\t\t\t\tdata.results.forEach((img) => {\n\t\t\t\t\timagsRreceived.push(img.urls.regular);\n\t\t\t\t});\n\t\t\t\tconst newFreshState = [[], [], []];\n\t\t\t\tlet index = 0;\n\t\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\t\tfor (let j = 0; j < 10; j++) {\n\t\t\t\t\t\tnewFreshState[i].push(imagsRreceived[index]);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetDataImg(newFreshState);\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (firstCall) {\n\t\t\treturn;\n\t\t}\n\t\tsearchFetchData();\n\t}, [searchState]);\n\n\tuseEffect(() => {\n\t\tinfinitFetchData();\n\t}, [pageIndex]);\n\n\tconst handleSearch = (e) => {\n\t\te.preventDefault();\n\n\t\tsetSearchState(inpRef.current.value);\n\t\tsetPageIndex(1);\n\t};\n\n\tconst inpRef = useRef();\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"scroll\", infiniteCheck);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"scroll\", infiniteCheck);\n\t\t};\n\t}, []);\n\n\tconst infiniteCheck = () => {\n\t\tconst { scrollTop, scrollHeight, clientHeight } =\n\t\t\tdocument.documentElement;\n\n\t\tif (scrollHeight - scrollTop <= clientHeight) {\n\t\t\tsetPageIndex((pageIndex) => pageIndex + 1);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className='container'>\n\t\t\t<form onSubmit={handleSearch}>\n\t\t\t\t<label htmlFor='search'>Votre recherche</label>\n\t\t\t\t<input type='text' id='search' ref={inpRef} />\n\t\t\t</form>\n\t\t\t<div className='card-list'>\n\t\t\t\t<div>\n\t\t\t\t\t{dataImg[0].map((img) => {\n\t\t\t\t\t\treturn <img key={uuidv4()} src={img} alt='unsplash' />;\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{dataImg[1].map((img) => {\n\t\t\t\t\t\treturn <img key={uuidv4()} src={img} alt='unsplash' />;\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{dataImg[2].map((img) => {\n\t\t\t\t\t\treturn <img key={uuidv4()} src={img} alt='unsplash' />;\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import InfiniteScroll from \"./Components/InfiniteScroll/InfiniteScroll\";\n\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<InfiniteScroll/>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}